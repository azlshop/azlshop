<!doctype html><html><head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>Success</title></head>
<body style="font-family:system-ui;margin:20px">
<h2 id="h">Success</h2><div id="box">Loading...</div>
<script>
const WORKER_URL="https://YOUR-WORKER.workers.dev";
const u=new URL(location.href);
const sid=u.searchParams.get("session_id");
const lang=u.searchParams.get("lang") || ((navigator.language||"en").toLowerCase().startsWith("ar")?"ar":"en");
document.documentElement.lang=lang;
document.documentElement.dir=(lang==="ar")?"rtl":"ltr";
document.getElementById("h").textContent=(lang==="ar")?"تم الدفع بنجاح ✅":"Payment successful ✅";
(async()=>{
  const r=await fetch(`${WORKER_URL}/retrieve-session?session_id=${encodeURIComponent(sid)}`);
  const d=await r.json();
  if(!r.ok){ document.getElementById("box").textContent=d.error||"Error"; return; }
  document.getElementById("box").innerHTML = `
    <p><b>${lang==="ar"?"الحالة":"Status"}:</b> ${d.payment_status}</p>
    <p><b>${lang==="ar"?"المبلغ":"Amount"}:</b> ${(d.amount_total/100).toFixed(2)} ${String(d.currency).toUpperCase()}</p>
  `;
})();
</script>
</body></html>
